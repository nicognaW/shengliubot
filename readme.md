# 省流bot

## 起手

1. 同步依赖、构建

> POSIX 就是 macOS / Linux, NT 就是 Windows
>
> 如果你使用 Intellij Idea，直接打开项目即可，无需额外输入以下指令

- POSIX

  ```shell
  ./gradlew build
  ```

- NT

  ```shell
  ./gradlew.bat build
  ```

2. 本地启动一个 redis

3. 在 `OPENAI_SECRET_KEY` 环境变量中填入 OpenAI Secret Key

4. 在 `BOT_ID` 环境变量中填入QQ号

5. 启动bot

> 如果你使用 Intellij Idea，直接运行 `main.kt` 中的 `main` 函数即可

- POSIX

  ```shell
  ./gradlew run
  ```

- NT

  ```shell
  ./gradlew.bat run
  ```

默认使用手表协议，启动后扫码登录，详情请参考 Mirai 文档，Mirai 的使用方法本文不做介绍。

## 详细文档与其他功能实现

首先，我们的源代码是我们项目的核心。它包含了所有的功能和操作，是项目运行的基础。我们的源代码量并不大，这是因为我们注重代码的效率和优化。我们相信，优秀的代码不在于长度，而在于其能够高效、准确地执行任务。

我们鼓励所有的用户和开发者阅读我们的源代码。通过阅读源代码，你不仅可以了解到代码的运行机制，还可以学习到我们的编程风格和习惯。此外，阅读源代码也是理解我们项目的最好方式。你可以看到我们如何从零开始，逐步构建出这个项目的。

在阅读源代码的过程中，如果你有任何疑问或者不理解的地方，我们都欢迎你提出。我们的团队会尽力解答你的问题，帮助你理解我们的代码。

总的来说，我们的源代码是开放的，我们鼓励所有人阅读和学习。我们相信，这不仅可以帮助你理解我们的项目，还可以提升你的编程技能。

**省流：源代码不多，请自己阅读源代码**

## 使用更好的prompt

通常为了实现更好的效果，你需要替换[此处](src/main/kotlin/AI.kt#L27)的prompt

如果你有 promp 可以分享，欢迎发送 issues 或 pr

## 使用其他AI后端

如果你想使用别的 AI 后端来处理省流，你需要修改根作用域内的这个函数：

```kotlin
fun getShengLiu(messages: String): String?
```

输入参数 `messages` 格式类似:

```text
1:你听说了吗
2:听说什么
1:那件事
2:那件事啊，听说了
```

这个函数返回输入对话的省流（摘要）结果，例如：

```text
用户1询问用户2是否听说某事，用户2表示听说了
```